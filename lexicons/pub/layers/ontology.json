{
  "lexicon": 1,
  "id": "pub.layers.ontology",
  "description": "Annotation ontology definitions. Defines the types, labels, and relationships used in annotation, inspired by FOVEA's persona-based ontology builder and bead's unified frame ontology interfaces. Ontologies are first-class objects that can be shared, versioned, and linked to knowledge graphs.",
  "defs": {
    "ontology": {
      "type": "record",
      "description": "An annotation ontology: a collection of typed definitions (entity types, situation types, role types, relation types) that together form a complete annotation framework.",
      "key": "tid",
      "record": {
        "type": "object",
        "required": ["name", "createdAt"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Human-readable name for this ontology.",
            "maxLength": 512
          },
          "description": {
            "type": "string",
            "description": "Detailed description of the ontology's purpose and scope.",
            "maxLength": 10000
          },
          "version": {
            "type": "string",
            "description": "Semantic version string.",
            "maxLength": 32
          },
          "domainUri": {
            "type": "string",
            "format": "at-uri",
            "description": "AT-URI of the domain definition node. Community-expandable via knowledge graph."
          },
          "domain": {
            "type": "string",
            "description": "Domain slug (fallback when domainUri unavailable).",
            "knownValues": ["general", "biomedical", "legal", "financial", "news", "social-media", "scientific", "intelligence", "dialogue", "multimodal", "custom"],
            "maxLength": 128
          },
          "parentRef": {
            "type": "string",
            "format": "at-uri",
            "description": "Reference to a parent ontology this one extends."
          },
          "personaRef": {
            "type": "string",
            "format": "at-uri",
            "description": "Reference to the persona that created/owns this ontology."
          },
          "knowledgeRefs": {
            "type": "array",
            "description": "Knowledge graph references grounding this ontology.",
            "maxLength": 64,
            "items": {
              "type": "ref",
              "ref": "pub.layers.defs#knowledgeRef"
            }
          },
          "createdAt": {
            "type": "string",
            "format": "datetime"
          }
        }
      }
    },
    "typeDef": {
      "type": "record",
      "description": "A type definition within an ontology. Covers entity types, situation types, role types, and relation types in a single unified model.",
      "key": "tid",
      "record": {
        "type": "object",
        "required": ["ontologyRef", "name", "typeKind", "createdAt"],
        "properties": {
          "ontologyRef": {
            "type": "string",
            "format": "at-uri",
            "description": "The ontology this type belongs to."
          },
          "name": {
            "type": "string",
            "description": "The type name/label.",
            "maxLength": 512
          },
          "typeKindUri": {
            "type": "string",
            "format": "at-uri",
            "description": "AT-URI of the type kind definition node. Community-expandable via knowledge graph."
          },
          "typeKind": {
            "type": "string",
            "description": "Type kind slug (fallback when typeKindUri unavailable).",
            "knownValues": ["entity-type", "situation-type", "role-type", "relation-type", "attribute-type"],
            "maxLength": 128
          },
          "gloss": {
            "type": "string",
            "description": "Rich text definition/gloss of this type. May include references to other types and Wikidata entities, following FOVEA conventions.",
            "maxLength": 10000
          },
          "parentTypeRef": {
            "type": "string",
            "format": "at-uri",
            "description": "Reference to a parent type (for type hierarchies/inheritance)."
          },
          "allowedRoles": {
            "type": "array",
            "description": "For frame/situation types: the roles that can be filled.",
            "maxLength": 64,
            "items": {
              "type": "ref",
              "ref": "#roleSlot"
            }
          },
          "allowedValues": {
            "type": "array",
            "description": "For attribute types: enumerated allowed values.",
            "maxLength": 256,
            "items": {
              "type": "string",
              "maxLength": 512
            }
          },
          "knowledgeRefs": {
            "type": "array",
            "description": "Knowledge graph groundings (Wikidata, chive.pub, FrameNet, etc.).",
            "maxLength": 32,
            "items": {
              "type": "ref",
              "ref": "pub.layers.defs#knowledgeRef"
            }
          },
          "features": {
            "type": "ref",
            "ref": "pub.layers.defs#featureMap"
          },
          "createdAt": {
            "type": "string",
            "format": "datetime"
          }
        }
      }
    },
    "roleSlot": {
      "type": "object",
      "description": "A role/argument slot in a frame or situation type definition. Structurally parallel to pub.layers.resource#slot â€” both represent named positions with type constraints. roleSlot is ontology-level (what roles a frame type allows); resource slot is template-level (what variables a template exposes).",
      "required": ["roleName"],
      "properties": {
        "roleName": {
          "type": "string",
          "description": "The role label (e.g., Agent, Patient, Theme, ARG0).",
          "maxLength": 256
        },
        "roleDescription": {
          "type": "string",
          "maxLength": 2048
        },
        "fillerTypeRefs": {
          "type": "array",
          "description": "References to allowed filler types (pub.layers.ontology#typeDef AT-URIs).",
          "maxLength": 32,
          "items": {
            "type": "string",
            "format": "at-uri"
          }
        },
        "collectionRef": {
          "type": "string",
          "format": "at-uri",
          "description": "AT-URI of a pub.layers.resource#collection constraining allowed fillers."
        },
        "required": {
          "type": "boolean",
          "description": "Whether this role is obligatory."
        },
        "defaultValue": {
          "type": "string",
          "description": "Default filler value if not explicitly filled.",
          "maxLength": 4096
        },
        "constraints": {
          "type": "array",
          "description": "Declarative constraints on fillers of this role (e.g., selectional restrictions, agreement requirements).",
          "maxLength": 32,
          "items": {
            "type": "ref",
            "ref": "pub.layers.defs#constraint"
          }
        },
        "knowledgeRefs": {
          "type": "array",
          "maxLength": 16,
          "items": {
            "type": "ref",
            "ref": "pub.layers.defs#knowledgeRef"
          }
        },
        "features": {
          "type": "ref",
          "ref": "pub.layers.defs#featureMap",
          "description": "Open-ended features for this role slot (e.g., semantic type, animacy preference, optionality conditions)."
        }
      }
    }
  }
}
